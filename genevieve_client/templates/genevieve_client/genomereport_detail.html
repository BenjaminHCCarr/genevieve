{% extends 'base.html' %}

{% block js_scripts %}
<script src="/static/js/genomereport_detail.js"></script>
{% endblock js_scripts %}

{% block content %}
<h2 id="report-name">{{ genomereport.report_name }}</h2>

<div id="download-as-csv"></div>

<table class="table">
  <tr>
    <th width="120px">Variant</th>
    <th width="120px">Allele Freq</th>
    <th width="120px">Zyg</th>
    <th>Info</th>
    <th>Notes</th>
  </tr>

  {% for gv in genomereport.genomevariant_set.all|slice:"100" %}
  <tr class="gv-row" id="gv-b37-{{ gv.variant.b37_id }}">
    <td class="gv-id-cell">{{ gv.variant.b37_id }}</td>
    <td class="gv-freq-cell">Unknown</td>
    <td>{{ gv.get_zygosity_display }}</td>
    <td class="gv-info-cell"></td>
    <td class="gv-notes-cell"><a href="{% url 'variant_edit' gv.variant.id %}">View/add/update shared notes</a></td>
  </tr>
  {% endfor %}

</table>
{% endblock content %}


{% block js_templates %}
<!-- Display of retrieved ReferenceClinVarAssertion data from GenNotes -->
<script type="text/template" id="variant-id-template">
  <b>${ clinvarRCVAPreferredName }</b><br>
  <small><b>b37 ID:</b> ${ b37VariantID }</small><br>
  <small><a href="${ linkGETEvidence }">Check on GET-Evidence</a></small>
</script>

<script type="text/template" id="variant-freq-template">
  ${ clinvarRCVAfreqESP }<br>
  <small><a href="${ linkExAC }">Check on ExAC</a></small>
</script>

<script type="text/template" id="variant-info-template">
  <b><a href="http://www.ncbi.nlm.nih.gov/clinvar/${ clinvarRCVAAccession }">
    ${ clinvarRCVAAccession }</a></b>
  <ul>
    <li><b>${ clinvarTraitLabel }: </b>${ clinvarRCVADiseaseName }</li>
    <li><b>Significance: </b>${ clinvarRCVASignificance }</li>
  </ul>
</script>
{% endblock js_templates %}
